{"ast":null,"code":"var _jsxFileName = \"/home/roan/Desktop/fe-nc-news/front_nc_news/src/components/SingleArticle.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from '@reach/router';\nimport * as api from '../utils/axiosRequests';\nimport Voter from './Voter';\nimport CommentList from './CommentList';\nimport ErrorPage from './ErrorPage';\n\nclass SingleArticle extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      article: {},\n      comments: [],\n      commentToPost: '',\n      err: ''\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        commentToPost: event.target.value\n      });\n    };\n\n    this.handlePostComment = event => {\n      event.preventDefault();\n      let commentToPost = this.state.commentToPost;\n      let user = this.props.user;\n      let article_id = this.props.article_id;\n      api.postComment(commentToPost, user, article_id).then(({\n        data: {\n          comment\n        }\n      }) => {\n        this.setState(currentState => {\n          return {\n            comments: [comment, ...currentState.comments],\n            commentToPost: ''\n          };\n        });\n      }).catch(({\n        response\n      }) => {\n        this.setState({\n          err: response.data.msg,\n          isLoading: false\n        });\n      });\n    };\n\n    this.handleDelete = event => {\n      let comment_id = event.target.parentElement.id;\n      api.deleteComment(comment_id).then(() => {\n        api.getArticleComments(this.props.article_id).then(comments => {\n          this.setState({\n            comments: comments\n          });\n        }).catch(({\n          response\n        }) => {\n          this.setState({\n            err: response.data.msg,\n            isLoading: false\n          });\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    Promise.all([api.getSingleArticle(this.props.article_id), api.getArticleComments(this.props.article_id)]).then(resolutions => {\n      this.setState({\n        article: resolutions[0],\n        comments: resolutions[1]\n      });\n    }).catch(({\n      response\n    }) => {\n      this.setState({\n        err: response.data.msg,\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: this.props.article_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, this.state.err ? React.createElement(ErrorPage, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.article.title), React.createElement(Voter, {\n      votes: this.state.article.votes,\n      type: \"articles\",\n      id: this.props.article_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: `/${this.state.article.topic}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"See all \", this.state.article.topic, \" stories\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, this.state.article.body), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"Comments\"), React.createElement(\"form\", {\n      onSubmit: this.handlePostComment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Post a comment: \"), React.createElement(\"textarea\", {\n      name: \"commentPost\",\n      id: \"commentPost\",\n      cols: \"60\",\n      rows: \"10\",\n      onChange: this.handleChange,\n      value: this.state.commentToPost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    })), this.state.comments && React.createElement(CommentList, {\n      comments: this.state.comments,\n      handleDelete: this.handleDelete,\n      user: this.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default SingleArticle;","map":{"version":3,"sources":["/home/roan/Desktop/fe-nc-news/front_nc_news/src/components/SingleArticle.jsx"],"names":["React","Component","Link","api","Voter","CommentList","ErrorPage","SingleArticle","state","article","comments","commentToPost","err","handleChange","event","setState","target","value","handlePostComment","preventDefault","user","props","article_id","postComment","then","data","comment","currentState","catch","response","msg","isLoading","handleDelete","comment_id","parentElement","id","deleteComment","getArticleComments","componentDidMount","Promise","all","getSingleArticle","resolutions","render","title","votes","topic","body"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from '@reach/router';\nimport * as api from '../utils/axiosRequests';\nimport Voter from './Voter';\nimport CommentList from './CommentList';\nimport ErrorPage from './ErrorPage';\n\nclass SingleArticle extends Component {\n  state = {\n    article: {},\n    comments: [],\n    commentToPost: '',\n    err: ''\n  };\n\n  handleChange = event => {\n    this.setState({ commentToPost: event.target.value });\n  };\n\n  handlePostComment = event => {\n    event.preventDefault();\n    let commentToPost = this.state.commentToPost;\n    let user = this.props.user;\n    let article_id = this.props.article_id;\n    api\n      .postComment(commentToPost, user, article_id)\n      .then(({ data: { comment } }) => {\n        this.setState(currentState => {\n          return {\n            comments: [comment, ...currentState.comments],\n            commentToPost: ''\n          };\n        });\n      })\n      .catch(({ response }) => {\n        this.setState({ err: response.data.msg, isLoading: false });\n      });\n  };\n\n  handleDelete = event => {\n    let comment_id = event.target.parentElement.id;\n    api.deleteComment(comment_id).then(() => {\n      api\n        .getArticleComments(this.props.article_id)\n        .then(comments => {\n          this.setState({ comments: comments });\n        })\n        .catch(({ response }) => {\n          this.setState({ err: response.data.msg, isLoading: false });\n        });\n    });\n  };\n\n  componentDidMount() {\n    Promise.all([\n      api.getSingleArticle(this.props.article_id),\n      api.getArticleComments(this.props.article_id)\n    ])\n      .then(resolutions => {\n        this.setState({\n          article: resolutions[0],\n          comments: resolutions[1]\n        });\n      })\n      .catch(({ response }) => {\n        this.setState({ err: response.data.msg, isLoading: false });\n      });\n  }\n\n  render() {\n    return (\n      <div id={this.props.article_id}>\n        {this.state.err ? (\n          <ErrorPage />\n        ) : (\n          <>\n            <h2>{this.state.article.title}</h2>\n            <Voter\n              votes={this.state.article.votes}\n              type=\"articles\"\n              id={this.props.article_id}\n            />\n            <Link to={`/${this.state.article.topic}`}>\n              <h6>See all {this.state.article.topic} stories</h6>\n            </Link>\n            <p>{this.state.article.body}</p>\n            <h4>Comments</h4>\n            <form onSubmit={this.handlePostComment}>\n              <h3>Post a comment: </h3>\n              <textarea\n                name=\"commentPost\"\n                id=\"commentPost\"\n                cols=\"60\"\n                rows=\"10\"\n                onChange={this.handleChange}\n                value={this.state.commentToPost}\n              ></textarea>\n              <input type=\"submit\" />\n            </form>\n            {this.state.comments && (\n              <CommentList\n                comments={this.state.comments}\n                handleDelete={this.handleDelete}\n                user={this.user}\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n}\nexport default SingleArticle;\n"]},"metadata":{},"sourceType":"module"}