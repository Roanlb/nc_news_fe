{"ast":null,"code":"import _classCallCheck from\"/home/roan/Desktop/fe-nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/roan/Desktop/fe-nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/roan/Desktop/fe-nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/roan/Desktop/fe-nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/roan/Desktop/fe-nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import*as api from'../utils/axiosRequests';import ArticleCard from'../components/ArticleCard';import ErrorPage from'./ErrorPage';var ArticleList=/*#__PURE__*/function(_Component){_inherits(ArticleList,_Component);function ArticleList(){var _getPrototypeOf2;var _this;_classCallCheck(this,ArticleList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ArticleList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={articles:[],isLoading:true,err:''};_this.handleSelectChange=function(_ref){var value=_ref.target.value;console.log(value,'value');console.log(_this.props.topic,'this proprs topic');api.getSortedArticles(_this.props.topic,value).then(function(articles){_this.setState({articles:articles}).catch(function(_ref2){var response=_ref2.response;_this.setState({err:response.data.msg,isLoading:false});});});};return _this;}_createClass(ArticleList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;api.getSortedArticles(this.props.topic).then(function(articles){_this2.setState({articles:articles,isLoading:false});}).catch(function(_ref3){var response=_ref3.response;console.log(response);_this2.setState({err:response.data.msg,isLoading:false});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this3=this;if(this.props.topic!==prevProps.topic){api.getSortedArticles(this.props.topic).then(function(articles){_this3.setState({articles:articles});}).catch(function(_ref4){var response=_ref4.response;_this3.setState({err:response.data.msg,isLoading:false});});}}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"div\",null,React.createElement(\"aside\",null,React.createElement(\"h4\",null,\"Sort by:\"),React.createElement(\"select\",{name:\"articleSelector\",id:\"articleSelector\",onChange:this.handleSelectChange},React.createElement(\"option\",{value:\"created_at\"},\"Date created\"),React.createElement(\"option\",{value:\"comment_count\"},\"Comment count\"),React.createElement(\"option\",{value:\"votes\"},\"Votes\"))),React.createElement(\"ul\",{className:\"ArticleList\"},this.state.isLoading&&!this.state.err&&React.createElement(\"h4\",null,\"Loading...\"),this.state.articles.map(function(article){console.log(article.votes);return React.createElement(ArticleCard,{key:article.article_id,title:article.title,votes:article.votes,topic:article.topic,id:article.article_id,mainFeed:_this4.props.mainFeed,comment_count:article.comment_count});})),this.state.err&&React.createElement(ErrorPage,{err:this.state.err}));}}]);return ArticleList;}(Component);export default ArticleList;","map":{"version":3,"sources":["/home/roan/Desktop/fe-nc-news/src/components/ArticleList.jsx"],"names":["React","Component","api","ArticleCard","ErrorPage","ArticleList","state","articles","isLoading","err","handleSelectChange","value","target","console","log","props","topic","getSortedArticles","then","setState","catch","response","data","msg","prevProps","prevState","map","article","votes","article_id","title","mainFeed","comment_count"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../utils/axiosRequests';\nimport ArticleCard from '../components/ArticleCard';\nimport ErrorPage from './ErrorPage';\n\nclass ArticleList extends Component {\n  state = { articles: [], isLoading: true, err: '' };\n\n  componentDidMount() {\n    api\n      .getSortedArticles(this.props.topic)\n      .then(articles => {\n        this.setState({ articles: articles, isLoading: false });\n      })\n      .catch(({ response }) => {\n        console.log(response);\n        this.setState({ err: response.data.msg, isLoading: false });\n      });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.topic !== prevProps.topic) {\n      api\n        .getSortedArticles(this.props.topic)\n        .then(articles => {\n          this.setState({\n            articles: articles\n          });\n        })\n        .catch(({ response }) => {\n          this.setState({ err: response.data.msg, isLoading: false });\n        });\n    }\n  }\n\n  handleSelectChange = ({ target: { value } }) => {\n    console.log(value, 'value');\n    console.log(this.props.topic, 'this proprs topic');\n    api.getSortedArticles(this.props.topic, value).then(articles => {\n      this.setState({ articles: articles }).catch(({ response }) => {\n        this.setState({ err: response.data.msg, isLoading: false });\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <aside>\n          <h4>Sort by:</h4>\n          <select\n            name=\"articleSelector\"\n            id=\"articleSelector\"\n            onChange={this.handleSelectChange}\n          >\n            <option value=\"created_at\">Date created</option>\n            <option value=\"comment_count\">Comment count</option>\n            <option value=\"votes\">Votes</option>\n          </select>\n        </aside>\n\n        <ul className=\"ArticleList\">\n          {this.state.isLoading && !this.state.err && <h4>Loading...</h4>}\n          {this.state.articles.map(article => {\n            console.log(article.votes);\n            return (\n              <ArticleCard\n                key={article.article_id}\n                title={article.title}\n                votes={article.votes}\n                topic={article.topic}\n                id={article.article_id}\n                mainFeed={this.props.mainFeed}\n                comment_count={article.comment_count}\n              />\n            );\n          })}\n        </ul>\n\n        {this.state.err && <ErrorPage err={this.state.err} />}\n      </div>\n    );\n  }\n}\n\nexport default ArticleList;\n"]},"metadata":{},"sourceType":"module"}