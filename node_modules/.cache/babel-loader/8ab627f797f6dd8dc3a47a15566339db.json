{"ast":null,"code":"var _jsxFileName = \"/home/roan/Desktop/fe-nc-news/front_nc_news/src/components/SingleArticle.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from '@reach/router';\nimport * as api from '../utils/axiosRequests';\n\nclass SingleArticle extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      article: {},\n      comments: [],\n      commentToPost: '',\n      votes: NaN\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        commentToPost: event.target.value\n      });\n    };\n\n    this.handlePostComment = event => {\n      event.preventDefault();\n      let commentToPost = this.state.commentToPost;\n      let user = this.props.user;\n      let article_id = this.props.article_id;\n      api.postComment(commentToPost, user, article_id).then(({\n        data: {\n          comment\n        }\n      }) => {\n        this.setState(currentState => {\n          return {\n            comments: [comment, ...currentState.comments]\n          };\n        });\n      });\n    };\n\n    this.handleDelete = event => {\n      let comment_id = event.target.parentElement.id;\n      api.deleteComment(comment_id).then(() => {\n        api.getArticleComments(this.props.article_id).then(comments => {\n          this.setState({\n            comments: comments\n          });\n        });\n      });\n    };\n\n    this.handleVote = event => {\n      let increment = +event.target.id;\n      let id = event.target.parentElement.id;\n      api.patchComment(increment, id).then(() => {\n        this.setState(currentState => {\n          return {\n            votes: increment\n          };\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    Promise.all([api.getSingleArticle(this.props.article_id), api.getArticleComments(this.props.article_id)]).then(resolutions => {\n      this.setState({\n        article: resolutions[0],\n        comments: resolutions[1]\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, this.state.article.title), React.createElement(\"button\", {\n      onClick: this.handleVote,\n      id: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Upvote\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.state.article.votes), React.createElement(\"button\", {\n      onClick: this.handleVote,\n      id: \"-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Downvote\"), React.createElement(Link, {\n      to: `/${this.state.article.topic}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"See all \", this.state.article.topic, \" stories\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, this.state.article.body), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Comments\"), React.createElement(\"form\", {\n      onSubmit: this.handlePostComment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Post a comment: \"), React.createElement(\"textarea\", {\n      name: \"commentPost\",\n      id: \"commentPost\",\n      cols: \"30\",\n      rows: \"10\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, this.state.comments.map(comment => {\n      return React.createElement(\"li\", {\n        key: comment.comment_id,\n        id: comment.comment_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, comment.author), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, comment.body), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Votes: \", comment.votes), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Created at: \", comment.created_at), this.props.user === comment.author && React.createElement(\"button\", {\n        onClick: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Delete\"));\n    })));\n  }\n\n}\n\nexport default SingleArticle;","map":{"version":3,"sources":["/home/roan/Desktop/fe-nc-news/front_nc_news/src/components/SingleArticle.jsx"],"names":["React","Component","Link","api","SingleArticle","state","article","comments","commentToPost","votes","NaN","handleChange","event","setState","target","value","handlePostComment","preventDefault","user","props","article_id","postComment","then","data","comment","currentState","handleDelete","comment_id","parentElement","id","deleteComment","getArticleComments","handleVote","increment","patchComment","componentDidMount","Promise","all","getSingleArticle","resolutions","render","title","topic","body","map","author","created_at"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from '@reach/router';\nimport * as api from '../utils/axiosRequests';\n\nclass SingleArticle extends Component {\n  state = {\n    article: {},\n    comments: [],\n    commentToPost: '',\n    votes: NaN\n  };\n\n  handleChange = event => {\n    this.setState({ commentToPost: event.target.value });\n  };\n\n  handlePostComment = event => {\n    event.preventDefault();\n    let commentToPost = this.state.commentToPost;\n    let user = this.props.user;\n    let article_id = this.props.article_id;\n    api\n      .postComment(commentToPost, user, article_id)\n      .then(({ data: { comment } }) => {\n        this.setState(currentState => {\n          return { comments: [comment, ...currentState.comments] };\n        });\n      });\n  };\n\n  handleDelete = event => {\n    let comment_id = event.target.parentElement.id;\n    api.deleteComment(comment_id).then(() => {\n      api.getArticleComments(this.props.article_id).then(comments => {\n        this.setState({ comments: comments });\n      });\n    });\n  };\n\n  componentDidMount() {\n    Promise.all([\n      api.getSingleArticle(this.props.article_id),\n      api.getArticleComments(this.props.article_id)\n    ]).then(resolutions => {\n      this.setState({\n        article: resolutions[0],\n        comments: resolutions[1]\n      });\n    });\n  }\n\n  handleVote = event => {\n    let increment = +event.target.id;\n    let id = event.target.parentElement.id;\n    api.patchComment(increment, id).then(() => {\n      this.setState(currentState => {\n        return { votes: increment };\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <h2>{this.state.article.title}</h2>\n        <button onClick={this.handleVote} id=\"1\">\n          Upvote\n        </button>\n        <p>{this.state.article.votes}</p>\n        <button onClick={this.handleVote} id=\"-1\">\n          Downvote\n        </button>\n        <Link to={`/${this.state.article.topic}`}>\n          <h6>See all {this.state.article.topic} stories</h6>\n        </Link>\n        <p>{this.state.article.body}</p>\n        <h4>Comments</h4>\n        <form onSubmit={this.handlePostComment}>\n          <h3>Post a comment: </h3>\n          <textarea\n            name=\"commentPost\"\n            id=\"commentPost\"\n            cols=\"30\"\n            rows=\"10\"\n            onChange={this.handleChange}\n          ></textarea>\n          <input type=\"submit\" />\n        </form>\n        <ul>\n          {this.state.comments.map(comment => {\n            return (\n              <li key={comment.comment_id} id={comment.comment_id}>\n                <h5>{comment.author}</h5>\n                <p>{comment.body}</p>\n                <h5>Votes: {comment.votes}</h5>\n                <h6>Created at: {comment.created_at}</h6>\n                {this.props.user === comment.author && (\n                  <button onClick={this.handleDelete}>Delete</button>\n                )}\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default SingleArticle;\n"]},"metadata":{},"sourceType":"module"}