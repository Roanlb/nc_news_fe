{"ast":null,"code":"var _jsxFileName = \"/home/roan/Desktop/fe-nc-news/src/components/SingleArticle.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from '@reach/router';\nimport * as api from '../utils/axiosRequests';\nimport Voter from './Voter';\nimport CommentList from './CommentList';\nimport ErrorPage from './ErrorPage';\nimport CommentSubmitForm from './CommentSubmitForm';\n\nclass SingleArticle extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      article: {},\n      comments: [],\n      commentToPost: '',\n      err: '',\n      commentWarning: ''\n    };\n\n    this.handleChange = ({\n      event: {\n        target: {\n          value\n        }\n      }\n    }) => {\n      this.setState({\n        commentToPost: value\n      });\n    };\n\n    this.handlePostComment = event => {\n      event.preventDefault();\n\n      if (!this.state.commentToPost || !this.props.user) {\n        this.setState({\n          commentWarning: 'You must be signed in and have filled in the comment box in order to post a comment'\n        });\n      } else {\n        let commentToPost = this.state.commentToPost;\n        let user = this.props.user;\n        let article_id = this.props.article_id;\n        api.postComment(commentToPost, user, article_id).then(({\n          data: {\n            comment\n          }\n        }) => {\n          this.setState(currentState => {\n            return {\n              comments: [comment, ...currentState.comments],\n              commentToPost: ''\n            };\n          });\n        }).catch(({\n          response\n        }) => {\n          this.setState({\n            err: response.data.msg,\n            isLoading: false\n          });\n        });\n      }\n    };\n\n    this.handleDelete = ({\n      event: {\n        target: {\n          parentElement: {\n            id\n          }\n        }\n      }\n    }) => {\n      let comment_id = id;\n      api.deleteComment(comment_id).then(() => {\n        api.getArticleComments(this.props.article_id).then(comments => {\n          this.setState({\n            comments: comments\n          });\n        }).catch(({\n          response: {\n            data: {\n              msg\n            }\n          }\n        }) => {\n          this.setState({\n            err: msg,\n            isLoading: false\n          });\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    Promise.all([api.getSingleArticle(this.props.article_id), api.getArticleComments(this.props.article_id)]).then(resolutions => {\n      this.setState({\n        article: resolutions[0],\n        comments: resolutions[1]\n      });\n    }).catch(({\n      response: {\n        data: {\n          msg\n        }\n      }\n    }) => {\n      this.setState({\n        err: msg,\n        isLoading: false\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: this.props.article_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.err ? React.createElement(ErrorPage, {\n      err: this.state.err,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }) : React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, this.state.article.title), React.createElement(Voter, {\n      votes: this.state.article.votes,\n      type: \"articles\",\n      id: this.props.article_id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: `/${this.state.article.topic}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"See all \", this.state.article.topic, \" stories\")), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.article.body), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Comments\"), React.createElement(CommentSubmitForm, {\n      handlePostComment: this.handlePostComment,\n      handleChange: this.handleChange,\n      commentToPost: this.state.commentToPost,\n      commentWarning: this.state.commentWarning,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), this.state.comments && React.createElement(CommentList, {\n      comments: this.state.comments,\n      handleDelete: this.handleDelete,\n      user: this.props.user,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default SingleArticle;","map":{"version":3,"sources":["/home/roan/Desktop/fe-nc-news/src/components/SingleArticle.jsx"],"names":["React","Component","Link","api","Voter","CommentList","ErrorPage","CommentSubmitForm","SingleArticle","state","article","comments","commentToPost","err","commentWarning","handleChange","event","target","value","setState","handlePostComment","preventDefault","props","user","article_id","postComment","then","data","comment","currentState","catch","response","msg","isLoading","handleDelete","parentElement","id","comment_id","deleteComment","getArticleComments","componentDidMount","Promise","all","getSingleArticle","resolutions","render","title","votes","topic","body"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from '@reach/router';\nimport * as api from '../utils/axiosRequests';\nimport Voter from './Voter';\nimport CommentList from './CommentList';\nimport ErrorPage from './ErrorPage';\nimport CommentSubmitForm from './CommentSubmitForm';\n\nclass SingleArticle extends Component {\n  state = {\n    article: {},\n    comments: [],\n    commentToPost: '',\n    err: '',\n    commentWarning: ''\n  };\n\n  handleChange = ({\n    event: {\n      target: { value }\n    }\n  }) => {\n    this.setState({ commentToPost: value });\n  };\n\n  handlePostComment = event => {\n    event.preventDefault();\n    if (!this.state.commentToPost || !this.props.user) {\n      this.setState({\n        commentWarning:\n          'You must be signed in and have filled in the comment box in order to post a comment'\n      });\n    } else {\n      let commentToPost = this.state.commentToPost;\n      let user = this.props.user;\n      let article_id = this.props.article_id;\n\n      api\n        .postComment(commentToPost, user, article_id)\n        .then(({ data: { comment } }) => {\n          this.setState(currentState => {\n            return {\n              comments: [comment, ...currentState.comments],\n              commentToPost: ''\n            };\n          });\n        })\n        .catch(({ response }) => {\n          this.setState({ err: response.data.msg, isLoading: false });\n        });\n    }\n  };\n\n  handleDelete = ({\n    event: {\n      target: {\n        parentElement: { id }\n      }\n    }\n  }) => {\n    let comment_id = id;\n    api.deleteComment(comment_id).then(() => {\n      api\n        .getArticleComments(this.props.article_id)\n        .then(comments => {\n          this.setState({ comments: comments });\n        })\n        .catch(\n          ({\n            response: {\n              data: { msg }\n            }\n          }) => {\n            this.setState({ err: msg, isLoading: false });\n          }\n        );\n    });\n  };\n\n  componentDidMount() {\n    Promise.all([\n      api.getSingleArticle(this.props.article_id),\n      api.getArticleComments(this.props.article_id)\n    ])\n      .then(resolutions => {\n        this.setState({\n          article: resolutions[0],\n          comments: resolutions[1]\n        });\n      })\n      .catch(\n        ({\n          response: {\n            data: { msg }\n          }\n        }) => {\n          this.setState({ err: msg, isLoading: false });\n        }\n      );\n  }\n\n  render() {\n    return (\n      <div id={this.props.article_id}>\n        {this.state.err ? (\n          <ErrorPage err={this.state.err} />\n        ) : (\n          <>\n            <h2>{this.state.article.title}</h2>\n\n            <Voter\n              votes={this.state.article.votes}\n              type=\"articles\"\n              id={this.props.article_id}\n            />\n\n            <Link to={`/${this.state.article.topic}`}>\n              <h6>See all {this.state.article.topic} stories</h6>\n            </Link>\n\n            <p>{this.state.article.body}</p>\n\n            <h4>Comments</h4>\n            <CommentSubmitForm\n              handlePostComment={this.handlePostComment}\n              handleChange={this.handleChange}\n              commentToPost={this.state.commentToPost}\n              commentWarning={this.state.commentWarning}\n            />\n            {this.state.comments && (\n              <CommentList\n                comments={this.state.comments}\n                handleDelete={this.handleDelete}\n                user={this.props.user}\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n}\nexport default SingleArticle;\n"]},"metadata":{},"sourceType":"module"}